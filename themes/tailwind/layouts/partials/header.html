<header class="w-full bg-white">
  <nav class="flex items-center justify-between flex-wrap px-8 py-12 container mx-auto" x-data="{ isOpen: false }">
    <figure class="flex items-center">
      <a href="{{ site.BaseURL }}" class="text-indigo-500 font-bold text-lg">
        {{ with site.Params.logo }}
        <img src="{{ . | absURL }}" width="160" height="40" alt="{{site.Title}}" class="h-10 lg:h-15 w-auto">
        {{ end }}
      </a>
      <figcaption class="hidden">emptyarea.com</figcaption>
    </figure>
    
    <div class="hidden sm:block lg:flex lg:items-center lg:w-auto text-center">
      <ul class="flex space-x-24">
        {{ $current := . }}
        {{ range site.Menus.main }}
        {{ $active := or ($current.IsMenuCurrent "main" .) ($current.HasMenuCurrent "main" .) }}
        {{ $active = or $active (eq .Name $current.Title) }}     
        {{ $active = or $active (and (eq (trim (path.Dir .URL) "/") $current.Section) (ne $current.Section "")) }}
        <li class="relative">
          <a class="block group" href="{{ .URL | absURL }}">
            {{ .Name }}
            <div class="absolute border-b border-black transition-all duration-500 transform group-hover:w-full{{ if $active }} w-full{{else}} w-0{{ end }}" aria-hidden="true"></div>
          </a>
        </li>
        {{ end }}
      </ul>
    </div>

    <!--Toggle button (hidden on large screens)-->
    <button type="button" class="sm:hidden z-50 inline-flex items-center justify-center p-2 text-white focus:outline-none" @click="isOpen = !isOpen" aria-controls="mobile-menu" aria-expanded="false">
      <span class="sr-only">Open main menu</span>
      <svg class="h-8 w-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="#333" aria-hidden="true" x-show="!isOpen">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
      <svg class="h-8 w-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="#fff" aria-hidden="true" x-show="isOpen" data-sal="flip-left" data-sal-duration="1000">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
    <div class="sm:hidden z-20 absolute inset-0 w-full h-screen bg-black" x-show="isOpen" x-transition:enter="transition ease-out duration-500" x-transition:enter-start="transform translate-x-full" x-transition:leave="transition ease-in duration-500" x-transition:leave-end="transform -translate-x-full">
      <ul class="mx-auto p-24 text-white flex flex-col items-start">
        {{ $current := . }}
        {{ range $i, $e := site.Menus.main }}
        {{ $active := or ($current.IsMenuCurrent "main" .) ($current.HasMenuCurrent "main" .) }}
        {{ $active = or $active (eq .Name $current.Title) }}     
        {{ $active = or $active (and (eq (trim (path.Dir .URL) "/") $current.Section) (ne $current.Section "")) }}
        <li class="relative my-8 text-xl" data-sal="slide-up" data-sal-duration="1000" data-sal-delay="{{ mul $i 200 }}">
          <a class="block group" href="{{ .URL | absURL }}">
            {{ .Name }}
            {{ if $active }}<div class="absolute border-b border-white transition-all duration-500 transform group-hover:w-full w-full" aria-hidden="true"></div>{{ end }}
          </a>
        </li>
        {{ end }}
      </ul>
    </div>

  </nav>
</header>